import { normalizePolicy, addPolicies } from '../policy';
export const generateRobotsTxt = (config) => {
    if (!config.generateRobotsTxt) {
        return null;
    }
    const { additionalSitemaps, policies } = config.robotsTxtOptions;
    const normalizedPolices = normalizePolicy(policies);
    let content = '';
    normalizedPolices.forEach((x) => {
        content += `User-agent: ${x.userAgent}\n`;
        if (x.allow) {
            content += `${addPolicies('Allow', x.allow)}`;
        }
        if (x.disallow) {
            content += `${addPolicies('Disallow', x.disallow)}`;
        }
    });
    // Append host
    content += `Host: ${config.siteUrl}\n`;
    additionalSitemaps.forEach((x) => {
        content += `Sitemap: ${x}\n`;
    });
    return content;
};
