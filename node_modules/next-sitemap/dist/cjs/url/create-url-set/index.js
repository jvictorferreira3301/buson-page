"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createUrlSet = void 0;
const util_1 = require("../util");
const array_1 = require("../../array");
/**
 * Create a unique url set
 * @param config
 * @param manifest
 */
exports.createUrlSet = (config, manifest) => {
    let allKeys = [
        ...Object.keys(manifest.build.pages),
        ...(manifest.preRender ? Object.keys(manifest.preRender.routes) : []),
    ];
    // Remove the urls based on config.exclude array
    if (config.exclude) {
        allKeys = array_1.removeFromArray(allKeys, config.exclude);
    }
    // Node10 support
    const urlSet = allKeys
        .filter((x) => !util_1.isNextInternalUrl(x))
        .map((x) => util_1.generateUrl(config.siteUrl, x));
    return [...new Set(urlSet)];
};
